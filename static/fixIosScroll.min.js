const fixIosScroll=function(option){this.element=option.element,this.firstChild=this.element.firstElementChild,this.t1=0,this.t2=0,this.sTimer=null,this.loadFnTimer=null,this.direction=1,this.lastScrollY=0,this.backYdistance=option.backYdistance&&"number"==typeof(1*option.backYdistance)&&option.backYdistance>=0&&option.backYdistance<=3?option.backYdistance:1,this.inScrollBack=!1,this.threshold=option.threshold&&"number"==typeof(1*option.threshold)?option.threshold:0,this._atTheTop=option.atTheTop&&"function"==typeof option.atTheTop?option.atTheTop:null,this._atTheBottom=option.atTheBottom&&"function"==typeof option.atTheBottom?option.atTheBottom:null,this._onLoadFn=option.onLoadFn&&"function"==typeof option.onLoadFn?option.onLoadFn:null,this._onScroll=option.onScroll&&"function"==typeof option.onScroll?option.onScroll:null,this._onScrollEnd=option.onScrollEnd&&"function"==typeof option.onScrollEnd?option.onScrollEnd:null,this._init(option)};fixIosScroll.prototype={constructor:fixIosScroll,_init:function(){let emptyChild=document.createElement("div");emptyChild.style.cssText="position:absolute;left:0;top:0;height:101%;width:100%;z-index:-100;",emptyChild.innerHTML="\x3c!-- 请勿删除 --\x3e",this.element.appendChild(emptyChild),0==this.element.scrollTop&&(this.element.scrollTop=this.backYdistance),this.element.addEventListener("scroll",e=>{this.bindScrollFn(e),e.preventDefault(),e.stopPropagation()},!1)},bindScrollFn(e){let nowScrollY=e.target.scrollTop;this.setDirection(nowScrollY),this._onScroll&&this._onScroll(e),clearTimeout(this.sTimer),this.t1=nowScrollY,this.sTimer=setTimeout(()=>{this.scrollWhithHandle()},30),0!=nowScrollY?this.firstChild.offsetHeight-(this.element.offsetHeight+nowScrollY)<=this.threshold&&this.threshold>0&&-1!=this.direction&&(clearTimeout(this.loadFnTimer),this.loadFnTimer=setTimeout(()=>{this._onLoadFn&&this._onLoadFn()},30)):this.element.scrollTop=this.backYdistance},scrollWhithHandle(){if(this.inScrollBack)return;let _scrollTop=this.element.scrollTop;this.t2=_scrollTop,this.t1==this.t2&&(this._onScrollEnd&&this._onScrollEnd(),this.isToTop(_scrollTop)&&this._atTheTop&&this._atTheTop(),this.isToBottom(_scrollTop)&&this._atTheBottom&&this._atTheBottom())},setDirection(nowScrollY){nowScrollY>this.lastScrollY?this.direction=1:this.direction=-1,this.lastScrollY=nowScrollY},isToTop(scrollTop){return scrollTop==this.backYdistance},isToBottom(scrollTop){return this.firstChild.offsetHeight-(scrollTop+this.element.offsetHeight)==0}};